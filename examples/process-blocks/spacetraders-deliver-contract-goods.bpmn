<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Web Modeler" exporterVersion="93d428d" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.3.0" camunda:diagramRelationId="80080f63-8a1f-406c-95cf-3ee310c54eed">
  <bpmn:process id="space-traders-deliver-contract-goods" name="SpaceTraders Deliver contract goods" isExecutable="true">
    <bpmn:extensionElements />
    <bpmn:startEvent id="StartEvent_1" name="Deliver contract goods">
      <bpmn:extensionElements />
      <bpmn:outgoing>Flow_14sorii</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="Event_039o9rs" name="Contract fulfilled">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=true" target="contract_fulfilled" />
          <zeebe:output source="=true" target="goods_delivered" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1c9inve</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_1yzbhs3" name="Has delivered all goods?" default="Flow_0otnh62">
      <bpmn:incoming>Flow_1mh7sk1</bpmn:incoming>
      <bpmn:outgoing>Flow_0jkwsfe</bpmn:outgoing>
      <bpmn:outgoing>Flow_0otnh62</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0jkwsfe" name="Yes" sourceRef="Gateway_1yzbhs3" targetRef="Activity_0x4r1kj">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=every trade_to_deliver in contract.terms.deliver satisfies trade_to_deliver.unitsFulfilled &gt;= trade_to_deliver.unitsRequired</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1c9inve" sourceRef="Activity_0x4r1kj" targetRef="Event_039o9rs" />
    <bpmn:endEvent id="Event_0buj847" name="Delivered goods">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=false" target="contract_fulfilled" />
          <zeebe:output source="=true" target="goods_delivered" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0otnh62</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0otnh62" name="No" sourceRef="Gateway_1yzbhs3" targetRef="Event_0buj847" />
    <bpmn:sequenceFlow id="Flow_14sorii" sourceRef="StartEvent_1" targetRef="Activity_04aurzq" />
    <bpmn:exclusiveGateway id="Gateway_12bg5mf" name="Has goods to deliver?" default="Flow_1tc5yrh">
      <bpmn:incoming>Flow_1sn75w4</bpmn:incoming>
      <bpmn:outgoing>Flow_1wd0cgz</bpmn:outgoing>
      <bpmn:outgoing>Flow_1tc5yrh</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1sn75w4" sourceRef="Activity_04aurzq" targetRef="Gateway_12bg5mf" />
    <bpmn:sequenceFlow id="Flow_1wd0cgz" name="Yes" sourceRef="Gateway_12bg5mf" targetRef="Activity_009182e">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=some good in cargo.inventory.symbol satisfies list contains(contract.terms.deliver.tradeSymbol, good)</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:subProcess id="Activity_009182e" name="Deliver contract goods for destinations">
      <bpmn:incoming>Flow_1wd0cgz</bpmn:incoming>
      <bpmn:outgoing>Flow_1mh7sk1</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics isSequential="true">
        <bpmn:extensionElements>
          <zeebe:loopCharacteristics inputCollection="=distinct values(contract.terms.deliver[list contains(cargo.inventory.symbol, tradeSymbol)].destinationSymbol)" inputElement="contract_destination" />
        </bpmn:extensionElements>
      </bpmn:multiInstanceLoopCharacteristics>
      <bpmn:startEvent id="Event_0acqlks">
        <bpmn:outgoing>Flow_08g5apu</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:callActivity id="Activity_1owv9zy" name="Navigate to delivery waypoint">
        <bpmn:extensionElements>
          <zeebe:calledElement processId="space-traders-navigate-ship" propagateAllChildVariables="false" />
          <zeebe:ioMapping>
            <zeebe:input source="=contract_destination" target="target" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_08g5apu</bpmn:incoming>
        <bpmn:outgoing>Flow_04duirb</bpmn:outgoing>
      </bpmn:callActivity>
      <bpmn:sequenceFlow id="Flow_08g5apu" sourceRef="Event_0acqlks" targetRef="Activity_1owv9zy" />
      <bpmn:subProcess id="Activity_10ltxtq" name="Deliver goods">
        <bpmn:incoming>Flow_04duirb</bpmn:incoming>
        <bpmn:outgoing>Flow_02o2x9y</bpmn:outgoing>
        <bpmn:multiInstanceLoopCharacteristics isSequential="true">
          <bpmn:extensionElements>
            <zeebe:loopCharacteristics inputCollection="=contract.terms.deliver[destinationSymbol = contract_destination].tradeSymbol" inputElement="deliver_good" />
          </bpmn:extensionElements>
        </bpmn:multiInstanceLoopCharacteristics>
        <bpmn:startEvent id="Event_1kowr88">
          <bpmn:outgoing>Flow_0zte41l</bpmn:outgoing>
        </bpmn:startEvent>
        <bpmn:sequenceFlow id="Flow_0zte41l" sourceRef="Event_1kowr88" targetRef="Activity_19lhcrc" />
        <bpmn:endEvent id="Event_1dgq71s">
          <bpmn:incoming>Flow_0bahbxm</bpmn:incoming>
        </bpmn:endEvent>
        <bpmn:sequenceFlow id="Flow_0bahbxm" sourceRef="Activity_0cdwh3l" targetRef="Event_1dgq71s" />
        <bpmn:sequenceFlow id="Flow_17723i7" sourceRef="Activity_19lhcrc" targetRef="Activity_0cdwh3l" />
        <bpmn:serviceTask id="Activity_19lhcrc" name="Dock ship" zeebe:modelerTemplate="a9a14970-c904-4a12-a4fb-55d4bc1b3928" zeebe:modelerTemplateVersion="1699656220488" zeebe:modelerTemplateIcon="data:image/png;base64,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">
          <bpmn:extensionElements>
            <zeebe:taskDefinition type="io.camunda:http-json:1" />
            <zeebe:ioMapping>
              <zeebe:input source="placeholder" target="objects" />
              <zeebe:input source="=current_ship" target="objects.dockShip_shipSymbol" />
              <zeebe:input source="bearer" target="authentication.type" />
              <zeebe:input source="=token" target="authentication.token" />
              <zeebe:input source="post" target="method" />
              <zeebe:input source="=&#34;https://api.spacetraders.io/v2/my/ships/&#34; + string(objects.dockShip_shipSymbol) + &#34;/dock&#34;" target="url" />
              <zeebe:input source="={&#10;}" target="queryParameters" />
            </zeebe:ioMapping>
            <zeebe:taskHeaders>
              <zeebe:header key="category" value="fleet" />
              <zeebe:header key="operation" value="dockShip" />
              <zeebe:header key="resultExpression" value="={&#10; &#34;nav&#34;: response.body.data.nav&#10;}" />
            </zeebe:taskHeaders>
          </bpmn:extensionElements>
          <bpmn:incoming>Flow_0zte41l</bpmn:incoming>
          <bpmn:outgoing>Flow_17723i7</bpmn:outgoing>
        </bpmn:serviceTask>
        <bpmn:serviceTask id="Activity_0cdwh3l" name="Deliver contract goods" zeebe:modelerTemplate="a9a14970-c904-4a12-a4fb-55d4bc1b3928" zeebe:modelerTemplateVersion="1699656220488" zeebe:modelerTemplateIcon="data:image/png;base64,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">
          <bpmn:extensionElements>
            <zeebe:taskDefinition type="io.camunda:http-json:1" />
            <zeebe:ioMapping>
              <zeebe:input source="placeholder" target="objects" />
              <zeebe:input source="=contract.id" target="objects.deliverContract_contractId" />
              <zeebe:input source="=current_ship" target="objects.deliverContract_deliverContractRequest.shipSymbol" />
              <zeebe:input source="=deliver_good" target="objects.deliverContract_deliverContractRequest.tradeSymbol" />
              <zeebe:input source="=cargo.inventory[symbol = deliver_good][1].units" target="objects.deliverContract_deliverContractRequest.units" />
              <zeebe:input source="bearer" target="authentication.type" />
              <zeebe:input source="=token" target="authentication.token" />
              <zeebe:input source="post" target="method" />
              <zeebe:input source="=&#34;https://api.spacetraders.io/v2/my/contracts/&#34; + string(objects.deliverContract_contractId) + &#34;/deliver&#34;" target="url" />
              <zeebe:input source="={&#10;}" target="queryParameters" />
              <zeebe:input source="= objects.deliverContract_deliverContractRequest" target="body" />
            </zeebe:ioMapping>
            <zeebe:taskHeaders>
              <zeebe:header key="category" value="contracts" />
              <zeebe:header key="operation" value="deliverContract" />
              <zeebe:header key="resultExpression" value="={&#10;  &#34;contract&#34;: response.body.data.contract, &#10;  &#34;cargo&#34;: response.body.data.cargo&#10;}" />
            </zeebe:taskHeaders>
          </bpmn:extensionElements>
          <bpmn:incoming>Flow_17723i7</bpmn:incoming>
          <bpmn:outgoing>Flow_0bahbxm</bpmn:outgoing>
        </bpmn:serviceTask>
      </bpmn:subProcess>
      <bpmn:sequenceFlow id="Flow_04duirb" sourceRef="Activity_1owv9zy" targetRef="Activity_10ltxtq" />
      <bpmn:endEvent id="Event_0907mye">
        <bpmn:incoming>Flow_02o2x9y</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_02o2x9y" sourceRef="Activity_10ltxtq" targetRef="Event_0907mye" />
    </bpmn:subProcess>
    <bpmn:endEvent id="Event_1oh4kzd" name="No goods to deliver">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=false" target="contract_fulfilled" />
          <zeebe:output source="=false" target="goods_delivered" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tc5yrh</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1tc5yrh" name="No" sourceRef="Gateway_12bg5mf" targetRef="Event_1oh4kzd" />
    <bpmn:sequenceFlow id="Flow_1mh7sk1" sourceRef="Activity_009182e" targetRef="Gateway_1yzbhs3" />
    <bpmn:serviceTask id="Activity_04aurzq" name="Get ship cargo" zeebe:modelerTemplate="a9a14970-c904-4a12-a4fb-55d4bc1b3928" zeebe:modelerTemplateVersion="1699656220488" zeebe:modelerTemplateIcon="data:image/png;base64,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">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" />
        <zeebe:ioMapping>
          <zeebe:input source="placeholder" target="objects" />
          <zeebe:input source="=current_ship" target="objects.getMyShipCargo_shipSymbol" />
          <zeebe:input source="bearer" target="authentication.type" />
          <zeebe:input source="=token" target="authentication.token" />
          <zeebe:input source="get" target="method" />
          <zeebe:input source="=&#34;https://api.spacetraders.io/v2/my/ships/&#34; + string(objects.getMyShipCargo_shipSymbol) + &#34;/cargo&#34;" target="url" />
          <zeebe:input source="={&#10;}" target="queryParameters" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="category" value="fleet" />
          <zeebe:header key="operation" value="getMyShipCargo" />
          <zeebe:header key="resultExpression" value="={&#10;  &#34;cargo&#34;: response.body.data,&#10;  &#34;ship_cargo&#34;: cargo&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_14sorii</bpmn:incoming>
      <bpmn:outgoing>Flow_1sn75w4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0x4r1kj" name="Fulfill contract" zeebe:modelerTemplate="a9a14970-c904-4a12-a4fb-55d4bc1b3928" zeebe:modelerTemplateVersion="1699656220488" zeebe:modelerTemplateIcon="data:image/png;base64,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">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" />
        <zeebe:ioMapping>
          <zeebe:input source="placeholder" target="objects" />
          <zeebe:input source="=contract.id" target="objects.fulfillContract_contractId" />
          <zeebe:input source="bearer" target="authentication.type" />
          <zeebe:input source="=token" target="authentication.token" />
          <zeebe:input source="post" target="method" />
          <zeebe:input source="=&#34;https://api.spacetraders.io/v2/my/contracts/&#34; + string(objects.fulfillContract_contractId) + &#34;/fulfill&#34;" target="url" />
          <zeebe:input source="={&#10;}" target="queryParameters" />
          <zeebe:input source="=" target="body" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="category" value="contracts" />
          <zeebe:header key="operation" value="fulfillContract" />
          <zeebe:header key="resultExpression" value="={&#10;  &#34;agent&#34;: response.body.data.agent, &#10;  &#34;contract&#34;: response.body.data.contract&#10;}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0jkwsfe</bpmn:incoming>
      <bpmn:outgoing>Flow_1c9inve</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:textAnnotation id="TextAnnotation_1s4fmey">
      <bpmn:text>Required variable:Â  current_ship, contract</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_084mbaj" sourceRef="StartEvent_1" targetRef="TextAnnotation_1s4fmey" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="space-traders-deliver-contract-goods">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="282" y="230" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="262" y="273" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_039o9rs_di" bpmnElement="Event_039o9rs">
        <dc:Bounds x="2012" y="230" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1991" y="273" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1yzbhs3_di" bpmnElement="Gateway_1yzbhs3" isMarkerVisible="true">
        <dc:Bounds x="1713" y="223" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1697" y="186" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0buj847_di" bpmnElement="Event_0buj847">
        <dc:Bounds x="2012" y="362" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1990" y="405" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_12bg5mf_di" bpmnElement="Gateway_12bg5mf" isMarkerVisible="true">
        <dc:Bounds x="545" y="223" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="537" y="186" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_009182e_di" bpmnElement="Activity_009182e" isExpanded="true">
        <dc:Bounds x="700" y="80" width="948" height="310" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0acqlks_di" bpmnElement="Event_0acqlks">
        <dc:Bounds x="740" y="230" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1uv4vi0_di" bpmnElement="Activity_1owv9zy">
        <dc:Bounds x="830" y="206" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10ltxtq_di" bpmnElement="Activity_10ltxtq" isExpanded="true">
        <dc:Bounds x="990" y="148" width="520" height="200" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1kowr88_di" bpmnElement="Event_1kowr88">
        <dc:Bounds x="1030" y="230" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1dgq71s_di" bpmnElement="Event_1dgq71s">
        <dc:Bounds x="1422" y="230" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_16ufgsp_di" bpmnElement="Activity_19lhcrc">
        <dc:Bounds x="1120" y="208" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hcjz2c_di" bpmnElement="Activity_0cdwh3l">
        <dc:Bounds x="1270" y="208" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0zte41l_di" bpmnElement="Flow_0zte41l">
        <di:waypoint x="1066" y="248" />
        <di:waypoint x="1120" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bahbxm_di" bpmnElement="Flow_0bahbxm">
        <di:waypoint x="1370" y="248" />
        <di:waypoint x="1422" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17723i7_di" bpmnElement="Flow_17723i7">
        <di:waypoint x="1220" y="248" />
        <di:waypoint x="1270" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0907mye_di" bpmnElement="Event_0907mye">
        <dc:Bounds x="1572" y="230" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_08g5apu_di" bpmnElement="Flow_08g5apu">
        <di:waypoint x="776" y="248" />
        <di:waypoint x="830" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04duirb_di" bpmnElement="Flow_04duirb">
        <di:waypoint x="930" y="246" />
        <di:waypoint x="990" y="246" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02o2x9y_di" bpmnElement="Flow_02o2x9y">
        <di:waypoint x="1510" y="248" />
        <di:waypoint x="1572" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_1oh4kzd_di" bpmnElement="Event_1oh4kzd">
        <dc:Bounds x="552" y="402" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="540" y="445" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0nk6m0e_di" bpmnElement="Activity_04aurzq">
        <dc:Bounds x="380" y="208" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_126by54_di" bpmnElement="Activity_0x4r1kj">
        <dc:Bounds x="1838" y="208" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1s4fmey_di" bpmnElement="TextAnnotation_1s4fmey">
        <dc:Bounds x="160" y="150" width="158" height="45" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0jkwsfe_di" bpmnElement="Flow_0jkwsfe">
        <di:waypoint x="1763" y="248" />
        <di:waypoint x="1838" y="248" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1792" y="230" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1c9inve_di" bpmnElement="Flow_1c9inve">
        <di:waypoint x="1938" y="248" />
        <di:waypoint x="2012" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0otnh62_di" bpmnElement="Flow_0otnh62">
        <di:waypoint x="1738" y="273" />
        <di:waypoint x="1738" y="380" />
        <di:waypoint x="2012" y="380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1794" y="363" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14sorii_di" bpmnElement="Flow_14sorii">
        <di:waypoint x="318" y="248" />
        <di:waypoint x="380" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sn75w4_di" bpmnElement="Flow_1sn75w4">
        <di:waypoint x="480" y="248" />
        <di:waypoint x="545" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wd0cgz_di" bpmnElement="Flow_1wd0cgz">
        <di:waypoint x="595" y="248" />
        <di:waypoint x="700" y="248" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="639" y="230" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tc5yrh_di" bpmnElement="Flow_1tc5yrh">
        <di:waypoint x="570" y="273" />
        <di:waypoint x="570" y="402" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="578" y="335" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mh7sk1_di" bpmnElement="Flow_1mh7sk1">
        <di:waypoint x="1648" y="248" />
        <di:waypoint x="1713" y="248" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_084mbaj_di" bpmnElement="Association_084mbaj">
        <di:waypoint x="290" y="233" />
        <di:waypoint x="263" y="195" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
